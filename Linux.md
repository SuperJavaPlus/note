## 1.Linux

linux在服务器领域的应用



> 网络连接的三种方式：

**桥接模式:**

虚拟系统可以和外部系统相互通讯，但是容易造成IP冲突

**NAT模式：**

网络地址转换模式。虚拟系统可以和外部通讯，不造成IP冲突

**主机模式：**

独立的系统



### 1.1 虚拟机的快照

如果你在使用虚拟机系统的时候（比如linux），你想回到原先的某一种状态，也就是说你担心可能有些误操作造成系统异常，需要回到原先某个正常运行的状态，VMware提供了这样的功能，就叫快照管理



### 1.2 虚拟机的克隆

方式一：直接拷贝一份安装好的虚拟机文件

方式二：使用VMware的克隆操作，注意，克隆时需要关闭Linux系统



## 2.Linux的目录结构

linuxx的文件系统是采用层级式的树状目录结构，在此结构中最上层是根目录"/"，然后在此目录下在创建其他的目录

在Linux世界里面，一切皆为文件

`/bin`:这个目录存放着最经常使用的命令

`/home`:存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名

`lib`:这个目录存放着系统最基本的动态连接共享库，其作用类似于Windows里的DDL

`/root`:该目录为系统管理员，也称作超级权限者的用户主目录

`/etc`:所有的系统管理所需要的配置文件和子目录

`/usr`:用户的很多应用程序和文件都放在这个目录下

`/boot`:存放的是启动Linux时使用的一些核心文件

`/dev`:类似于Windows的设备管理器，把所有的硬件用文件形式存储

`/meida`:Linux系统会自动识别一些设备，例如U盘，光驱等，当识别后，Linux会把识别的设备挂载到这个目录下

`/mnt`:系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/		上，然后进入该目录就可以查看里面的内容了

`/opt`:这是给主机额外安装软件所存放的目录

`/proc`:这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息

`/usr/local`:这是另一个给主机额外安装软件所安装的目录，一般是通过编译源码的方式安装的程序

`/var`:这个目录存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下



### 2.1 目录相关的命令

- cd:切换目录命令！

- cd .. ：返回上一级目录

- ./：当前目录

- ls:列出目录：在Linux中，ls可能是最经常被使用的

  - -a  查看全部文件，包含隐藏文件
  - -l 列出所有的文件，包含文件的属性和权限，没有隐藏文件

  所有的Linux命令可以组合使用

  ![image-20210916192223266](F:\笔记图片\img\image-20210916192223266.png)

- cd:切换目录    cd 目录名（绝对路径都是以/开头的，相对路径）

  - ~  回到当前用户目录

  ![image-20210916192540710](F:\笔记图片\img\image-20210916192540710.png)

- pwd: 显示当前用户所在的目录

- mkdir:创建一个目录

  - -p 可以创建多级目录

- rmdir:删除目录,仅能删除空目录

  - -p  能删除存在文件的目录

- cp:复制文件或者目录

  - cp  原来的地方  新的地方

- rm:移除文件或目录

  - -f   忽略不存在的文件，不会出现警告，强制删除
  - -r  递归删除目录
  - -i  询问是否删除

  ```
  rm -rf  /系统中的所有文件就被删除了，删库跑路就是这么操作的
  ```

  

- mv: 移动文件或目录，重命名文件

  - -f   强制移动
  - -u  只替换已经更新过的文件

  ![image-20210916194407739](F:\笔记图片\img\image-20210916194407739.png)



### 2.2 文件属性的查看

- ![image-20210917093753878](F:\笔记图片\img\image-20210917093753878.png)

在Linux中第一个子父代表这个文件是目录、文件、或链接文件等等

- 当为[d]则是目录

- 当为[-]则是文件

- 若是[I]则为链接文档

  ![](F:\笔记图片\img\微信图片_20210917094410.jpg)



> 修改文件属性

1. **chgrp:更改文件数组**

   ```
   chgrp [-R] 数组名 文件名
   ```

   -R 递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R参数，那么该目录下所有文件的属组都会更改

2. **chown: 更改文件属主，也可以同时更改文件属组**

   ```
   chown [-R] 属主名  文件名
   chown [-R] 属主名：属组名 文件名
   ```

3. **chmod:更改文件文件9个属性**

   ```
   chmod [-R] xyz  文件或目录
   ```

   Linux文件属性有两种设置方法，一种是数字，一种是符号

   Linux文件的基本权限有九个，分别的属主/属组/其他用户三种身份各有自己的读/写/执行权限

   ```
   r:4   w:2   x:1
   可读可写不可执行：  rw-   6
   可读可写可执行：	rws   7
   
   chmod 777  文件赋予所有用户可读可写可执行
   ```

   ![image-20210917100224840](F:\笔记图片\img\image-20210917100224840.png)





### 2.3 文件内容查看

- cat  由第一行开始显示文件内容
- tac  从最后一行开始显示
- nl  显示的时候，顺道输出行号
- more 一页一页的显示文件内容（空格代表翻页，enter代表向下看一行，:f行号）
- less  less与more类似，但是比more更好的是，它可以往前翻页（上下键代表翻页，推出q命令，查找字符串 /要查找的字符，向下寻找。 ？是向上寻找）
- head  只看头几行，通过 -n参数来控制显示几行
- tail  只看最后几行

## 3.远程登录Linux

为什么需要远程登录？

​	linux服务器是开发小组共享

​	正式上线的项目是运行在公网

​	因此程序员需要远程登录到Linux进行项目管理或者开发



xShell:

**查看Linux的端口号**

1. 打开终端

2. 输入 ifconfig指令

3. ![image-20210916094425883](F:\笔记图片\img\image-20210916094425883.png)

4. 登录xShell

   ![image-20210916092630572](F:\笔记图片\img\image-20210916092630572.png)



**硬链接：**假设A是B的硬链接，那么他们指向了同一个文件，如果删除了其中一个，对另外一个没有影响。

**软链接：**类似Windows下的快捷方式，删除了源文件，快捷方式也访问不了。

​				A是B的软链接。A和B之间是主从关系。A和B指向不同的incode,继而指向不同的数据块。

​				如果B被删除了，A仍然存在（因为是两个不同的文件），但指向的是一个无效的链接

## 4.Vim和Vi的使用

![](F:\笔记图片\img\微信图片_20210917111024.jpg)

vim和vi就是Linux下的文本编辑器



### 4.1 vim和vi的常用的三种模式

**命令模式：**

用户刚刚启动 vi/vim，便进入了命令模式。

此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

以下是常用的几个命令：

- **i** 切换到输入模式，以输入字符。
- **x** 删除当前光标所在处的字符。
- **:** 切换到底线命令模式，以在最底一行输入命令。

若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

**输入模式：**

在命令模式下按下i就进入了输入模式。

在输入模式中，可以使用以下按键：

- **字符按键以及Shift组合**，输入字符
- **ENTER**，回车键，换行
- **BACK SPACE**，退格键，删除光标前一个字符
- **DEL**，删除键，删除光标后一个字符
- **方向键**，在文本中移动光标
- **HOME**/**END**，移动光标到行首/行尾
- **Page Up**/**Page Down**，上/下翻页
- **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
- **ESC**，退出输入模式，切换到命令模式

**底线命令模式**

- 在命令模式下按下:（英文冒号）就进入了底线命令模式。
- 底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。
- 在底线命令模式中，基本的命令有（已经省略了冒号）：
- - q 退出程序
  - w 保存文件
- 按ESC键可随时退出底线命令模式。



## 5.Linux实操

- shutdown	-h	now		立刻进行关机
- shutdown    -h    1             1分钟后关机
- shutdown	-r	now		 现在重新启动计算机
- halt    关机
- reboot    重新启动计算机
- sync       把内存的数据同步到磁盘

注意：

​	不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中



- 登录时尽量少用root账号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后再用"**su-用户名**" 命令来切换成系统管理员的身份
- 在提示符下输入logout即可注销账户



## 6.用户管理

- > 添加一个用户：useradd 用户名
  
  - 默认该用户的的家目录在/home/用户名 
  - 当用户创建成功后，会自动的创建和 用户名相同的家目录
  - 也可以通过useradd -d指定目录 新的用户名，给新创建的用户指定家目录
  - useradd -G  给用户分配组
  
- > 修改帐号

  修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。

  修改已有用户的信息使用usermod命令，其格式如下：

  ```
  usermod 选项 用户名
  ```

  常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。

  例如：

  ```
  # usermod -s /bin/ksh -d /home/z –g developer kuangshen
  ```

  此命令将用户kuangshen的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。

- 指定/修改密码：passwd 用户名

- 显示当前用户所在的目录：pwd

- 删除用户，但是要保留家目录：userdel 用户名

- 删除用户以及用户主目录：user -r 用户名

- 查询用户信息：id 用户名

- 切换用户：su - 用户名
  - 从权限高的用户切换到权限低的用户需要密码，反之需要
  - 当需要返回原来的用户时，使用exit/logout指令
  
- 查看当前用户信息：whoami/who am i     显示的是第一次登录到当前系统的用户

- 锁定账户：passwd -l

  ​				  passwd -d



## 7.用户组

类似于角色，系统可以对有共性/权限的多个用户进行统一管理

- 新增组:groupadd 组名
- 删除组：groupdel 组名

![image-20210916165256964](F:\笔记图片\img\image-20210916165256964.png)

- 修改用户的组： usermod -g 用户组 用户名

- 修改用户组的权限和名字：group -g (修改id) -n（修改名字）

  ```
  # groupadd -g 101 group2
  ```

  此命令向系统中增加了一个新组group2，同时指定新组的组标识号是101。

**用户和组相关的文件：**

- /etc/passwd文件

  用户的配置文件，记录用户的各种信息

- /etc/shadow文件

  口令的配置文件

